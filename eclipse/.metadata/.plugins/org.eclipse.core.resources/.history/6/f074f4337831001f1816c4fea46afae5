package com.soso;

import java.sql.Connection;
import java.util.Scanner;

import com.soso.util.DBManager;

public class Customer {
	Scanner scanner = new Scanner(System.in);
	
	public void showCustomerMenu() {
		System.out.println("Java ShoppingMall");
		System.out.println("┌───────────────────────────────────────────────────────────────────┐");
		System.out.println("│1.상품보기		2.주문확인		3.배송확인		4.자유게시판	│");
		System.out.println("└───────────────────────────────────────────────────────────────────┘");
	}
	public void  registerCustomer() {
		System.out.println("회원가입");
		System.out.print("사용할 아이디: ");
		String customerId = scanner.nextLine();

	    System.out.print("사용할 비밀번호: ");
	    String customerPw = scanner.nextLine();

	    System.out.print("성함: ");
	    String customerName = scanner.nextLine();

	    System.out.print("핸드폰번호: ");
	    String phone = scanner.nextLine();

	    System.out.print("Email주소: ");
	    String email = scanner.nextLine();

	    System.out.print("주소: ");
	    String address = scanner.nextLine();

	    System.out.print("시: ");
	    String city = scanner.nextLine();
	    
	    Connection conn = DBManager.getConnection();
        String sql = "INSERT INTO Customers (CustomerID, CustomerPW, CustomerName, Phone, Email, Address, City) VALUES (?, ?, ?, ?, ?, ?, ?)";


	}
	
	 public void addCustomer() {
	        
	        try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
	            pstmt.setString(1, customer.getCustomerId());
	            pstmt.setString(2, customer.getCustomerPw());
	            pstmt.setString(3, customer.getCustomerName());
	            pstmt.setString(4, customer.getPhone());
	            pstmt.setString(5, customer.getEmail());
	            pstmt.setString(6, customer.getAddress());
	            pstmt.setString(7, customer.getCity());

	            int rows = pstmt.executeUpdate();
	            if (rows > 0) {
	                System.out.println("고객 정보가 성공적으로 저장되었습니다.");
	            }
	        } catch (SQLException e) {
	            e.printStackTrace();
	        } finally {
	            DBManager.close(conn);
	        }
	    }

	    public boolean login(String customerId, String password) {
	        Connection conn = DBManager.getConnection();
	        String sql = "SELECT * FROM Customers WHERE CustomerID = ? AND CustomerPW = ?";

	        try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
	            pstmt.setString(1, customerId);
	            pstmt.setString(2, password);

	            ResultSet rs = pstmt.executeQuery();
	            return rs.next(); // ID와 PW가 일치하는 행이 있는 경우 true 반환
	        } catch (SQLException e) {
	            e.printStackTrace();
	        } finally {
	            DBManager.close(conn);
	        }
	        return false;
	    }

}
